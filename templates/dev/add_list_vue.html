{% extends "base_nav.html" %}
{% block title %}
vue
{% endblock %}
{% block header %}
vue
{% endblock %}
{% block content %}
<script>

	$(function(){
		Vue.options.delimiters = ['{|{', '}|}'];

		Vue.component('todo-item', {
			template: '\
				<li>\
					{|{ title }|}\
					<button v-on:click="$emit(\'remove\')">X</button>\
				</li>\
			',
			props: ['title']
		})

		new Vue({
			el: '#todo-list-example',
			data: {
				newTodoText: '',
				todos: [],
				nextTodoId: 1,
			},
			methods: {
				addNewTodo: function () {
					this.todos.push({
						id: this.nextTodoId++,
						title: this.newTodoText
					})
					this.newTodoText = ''
				},
				create: function () {
									this.nextTodoId = 1
					this.todos = []
					alertmessage('success', '成功建立新資料')
				},
			},
		})

	})

</script>

<div id="todo-list-example">
	<input
		v-model="newTodoText"
		v-on:keyup.enter="addNewTodo"
		placeholder="按 enter 增加說明文字項目"
	>
	<button
		v-on:click="create()"
	>
		送出
	</button>
	<ul>
		<li
			is="todo-item"
			v-for="(todo, index) in todos"
			v-bind:key="todo.id"
			v-bind:title="todo.title"
			v-on:remove="todos.splice(index, 1)"
		></li>
	</ul>
</div>

{% endblock %}
