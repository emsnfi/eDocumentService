{% extends "base_nav.html" %}
{% load staticfiles %}
{% block title %}
首頁
{% endblock %}

{% block style %}
	<link href="{% static "ebookSystem/css/bootstrap/assets/docs.min.css" %}" rel="stylesheet" > 
	<link href="{% static "ebookSystem/css/bootstrap/assets/src/docs.css" %}" rel="stylesheet" > 
	  <style>
	  .carousel-inner > .item > img,
	  .carousel-inner > .item > a > img {
		  margin: auto;
	  }
	  </style>
{% endblock %}

{% block content %}
{% csrf_token %}
<script>

	$(function(){
		//client
		let client = new $.RestClient('/genericUser/api/');
		client.add('bannercontents');

		//read
		client.bannercontents.read()
		.done(function (data) {

			let textfornvda = ''
			_.each(data, function(d){
				textfornvda += `<li id="id_li_textfornvda_` +d['id'] +`" class="item_text">` +d['content'] +`</li>`
			})
			$('#id_ul_textfornvda').html(textfornvda)




			let cover_image = ''
			_.each(data, function(d){
				if(iser(cover_image)){
					cover_image += `
						<div class="item active">
							<img
								src="/genericUser/api/bannercontents/` +d['id'] +`/resource/cover/image/"
								alt="` +d['title'] +`"
								title="` +d['title'] +`"
								style="height: 480px;width:940px">
						</div>
					`
					console.log(d)
				}
				else {
					cover_image += `
						<div class="item">
							<img
								src="/genericUser/api/bannercontents/` +d['id'] +`/resource/cover/image/"
								alt="` +d['title'] +`"
								title="` +d['title'] +`"
								style="height: 480px;width:940px">
						</div>
					`
				}
			})
			$('#id_cover_image').html(cover_image)

			let index=0
			let indicators = ''
			_.each(data, function(d){
				if(iser(indicators)){
					indicators += `
						<li data-target="#myCarousel" data-slide-to="` +index +`" class="active"></li>
					`
				}
				else {
					indicators += `
						<li data-target="#myCarousel" data-slide-to="` +index +`"></li>
					`
				}
				index+=1
			})
			$('#id_indicators').html(indicators)

		});

	})

</script>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
	<!-- Indicators -->
	<ol id="id_indicators" class="carousel-indicators">
	</ol>

	<!-- Wrapper for slides -->
	<div id="id_cover_image" class="carousel-inner" role="listbox">
	</div>

	<!-- Left and right controls -->
	<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev" aria-label="上一頁">
		<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
		<span class="sr-only">Previous</span>
	</a>
	<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next" aria-label="下一頁">
		<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
		<span class="sr-only">Next</span>
	</a>
</div>

<div class="textfornvda">
	<h4>首頁圖片說明</h4>
	<ul id="id_ul_textfornvda"></ul>
</div>

<div class="row" style="padding-top: 20px;">
	<div class="col-lg-4">
		<div class="panel panel-success">
			<div class="panel-heading">最新消息</div>
			<div class="panel-body">
				{% for announcement in announcement_list|slice:":5" %}
				<p style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
					<a class="btn btn-link" role="button" href="{% url 'genericUser:announcement' announcement.id %}">{{ announcement.datetime.year }}年{{ announcement.datetime.month }}月{{ announcement.datetime.day }}日 {{ announcement.title }}</a>
				</p>
				{% endfor %}
				<!-- <a href='{% url 'genericUser:announcement_list' %}'>公告列表</a> -->
				<div class="pull-right">
					<p><a class="btn btn-default center" href="{% url "genericUser:announcement_list" %}" role="button">公告列表 »</a></p>
				</div>
			</div>
		</div>
	</div>
	<div class="col-lg-4">
		<div class="panel panel-success" itemscope="" itemtype="http://schema.org/Product">
			<div class="panel-heading" itemprop="name">雲端千眼-使用流程</div>
			<div class="panel-body" itemprop="description">
				<p>一、以段落為基準，每段即為一行，辨識軟體基本以這種方式輸出，如有遺漏再請將分多行的文字但為一段之內容合併成一行。二、每行前不需空格。三、英文文句標點使用半形符號。四、中文文句標點使用全形符號，但遇到英文、數字使用半形符號。</p>
				<div class="pull-right">
					<p><a class="btn btn-default center" role="button" href="/genericUser/user_guide" itemprop="url" >閱讀更多 »</a></p>
				</div>
			</div>
		</div>
	</div>
	<div class="col-lg-4">
		<div class="panel panel-success" itemscope="" itemtype="http://schema.org/Product">
			<div class="panel-heading" itemprop="name">招募志工</div>
			<div class="panel-body" itemprop="description">
				<p>「eDocumentService雲端千眼平台」招募大量志工於線上進行重製書籍服務，不如一般志工型態需固定排班或前往特定地點，只要您有時間、有網路，無論何時何地皆能進行志工服務，讓您的愛不再受到限制！</p>
				<div class="pull-right">
					<p><a class="btn btn-default center" href="{% url 'genericUser:recruit' %}" role="button" itemprop="url">閱讀更多 »</a></p>
				</div>
			</div>
		</div>
	</div>
</div>

</div>
{% endblock %}