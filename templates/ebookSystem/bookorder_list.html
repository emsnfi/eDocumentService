{% extends "base_nav.html" %}
{% block title %}
校對順序
{% endblock %}
{% block content %}
{% csrf_token %}
{% include 'comp/table-div.vue' %}

<div id="bookorder_list">
	<h2>校對順序</h2>
	<table-div :header="bookorder_header" :datas="bookorder_datas">

	</table-div>
</div>

<script>

	new Vue({
		el: '#bookorder_list',
		data: {
			bookorder_header: {
				'order': '順序',
				'bookname': '書名',
				'status': '狀態',
			},
			bookorder_datas: [],
		},
		created: function () {
			this.client = new $.RestClient('/ebookSystem/api/');
			this.client.add('bookorders');

			let self = this
			self.client.bookorders.read()
			.done(function(data) {
				filter_data = []
				_.each(data, function(v){
					filter_data.push({
						'order': v.order,
						'bookname': v.bookname,
						'status': v.status,
					})
				})
				self.bookorder_datas = filter_data
			})
			.fail(function(xhr, result, statusText){
				alertmessage('error', xhr.responseText)
			})
		},
	})

</script>
{% endblock %}